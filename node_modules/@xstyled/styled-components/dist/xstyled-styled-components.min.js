!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?t(exports,require("styled-components"),require("react"),require("@xstyled/system")):"function"==typeof define&&define.amd?define(["exports","styled-components","react","@xstyled/system"],t):t((e="undefined"!=typeof globalThis?globalThis:e||self).xstyled={},e.styled,e.React,e.xstyledSystem)}(this,(function(e,t,r,n){"use strict";function o(e){return e&&"object"==typeof e&&"default"in e?e:{default:e}}var u=o(t),i=o(r),l=function(e){return"string"==typeof e&&""!==e},a=function(e){return"object"==typeof e&&null!==e},c=function(e){return"function"==typeof e};function d(e){return e.reduce((function(e,t){var r=e.length-1,n=e[r];return"string"==typeof n&&"string"==typeof t?e[r]=n+t:e.push(t),e}),[])}function f(e,t){if(null==e)return{};var r,n,o={},u=Object.keys(e);for(n=0;n<u.length;n++)r=u[n],t.indexOf(r)>=0||(o[r]=e[r]);return o}function s(){return(s=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e}).apply(this,arguments)}function m(e){return n.getBreakpoints({theme:e})}function g(){var e=i.default.useState("undefined"==typeof window?null:window.innerWidth),t=e[0],r=e[1];return i.default.useEffect((function(){function e(){r(window.innerWidth)}return window.addEventListener("resize",e),r(window.innerWidth),function(){return window.removeEventListener("resize",e)}}),[]),t}function h(e,t){var r=function(e,t){var r=m(e)[t];return 0===r?null:r}(e,t);return g()>=r}function v(e,t){var r=function(e,t){var r=m(e)[t];return 0===r?null:r-.02}(e,t);return g()<r}function y(){return["&&{",n.system,"}"]}y.meta=n.system.meta;var p=function(e){return function(t){var r=Number(t);return e(Number.isNaN(r)?t:r)}},b=/\s+/,w=function(e){return function(t){var r=t.split(b);return function(t){return r.map((function(r){return e(r)(t)})).join(" ")}}},S=/\s*,\s*/,C=function(e){return function(t){var r=t.split(S);return function(t){return r.map((function(r){return e(r)(t)})).join(",")}}},x=p(n.getPx),M=p(n.getSpace),P=w(M),j=p(n.getBorder),T=p(n.getBorderWidth),O=w(T),E=p(n.getSize),B=w(n.getBorderStyle),k={margin:P,"margin-top":M,"margin-bottom":M,"margin-left":M,"margin-right":M,padding:P,"padding-top":M,"padding-bottom":M,"padding-left":M,"padding-right":M,"grid-gap":P,"grid-row-gap":M,"grid-column-gap":M,color:n.getColor,"background-color":n.getColor,"border-color":n.getColor,"border-top-color":n.getColor,"border-right-color":n.getColor,"border-bottom-color":n.getColor,"border-left-color":n.getColor,"outline-color":n.getColor,fill:n.getColor,"border-radius":w(p(n.getRadius)),"border-top-left-radius":w(p(n.getRadius)),"border-top-right-radius":w(p(n.getRadius)),"border-bottom-right-radius":w(p(n.getRadius)),"border-bottom-left-radius":w(p(n.getRadius)),border:j,"border-top":j,"border-right":j,"border-bottom":j,"border-left":j,"border-width":O,"border-top-width":T,"border-right-width":T,"border-bottom-width":T,"border-left-width":T,"outline-width":T,"border-style":B,"border-top-style":n.getBorderStyle,"border-right-style":n.getBorderStyle,"border-bottom-style":n.getBorderStyle,"border-left-style":n.getBorderStyle,"outline-style":n.getBorderStyle,"box-shadow":C(n.getShadow),"text-shadow":C(n.getShadow),width:E,height:E,"max-width":E,"max-height":E,"min-width":E,"min-height":E,"z-index":p(n.getZIndex),"font-family":n.getFont,"font-size":p(n.getFontSize),"line-height":p(n.getLineHeight),"font-weight":n.getFontWeight,"letter-spacing":p(n.getLetterSpacing),transition:n.getTransition,top:x,right:x,bottom:x,left:x},L=/(\s*)([^&{}:;\n]+):\s*([^&{}:;\n]+)(\s*);/g,_=/\s*!important\s*/;function I(e){if("string"!=typeof e)return e;for(var t,r=0,n=[],o=function(){var o=t,u=o[1],i=o[2],l=o[3],a=o[4],c=k[i];if(c){var d=_.test(l),f=l.replace(_,"");n.push(e.slice(r,t.index)),n.push((function(e){return""+u+i+": "+c(f)(e)+(d?" !important":"")+";"+a})),r=t.index+t[0].length}};t=L.exec(e);)o();return n.push(e.slice(r,e.length)),n}var q=function(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];return t.filter(Boolean).join(".")},R=function(e){return"--"+e.replace(/\./g,"-")},z=function(e,t){return"var("+R(e)+", "+t+")"};function N(e,t,r){void 0===r&&(r=e);var n=Array.isArray(e)?[]:{};for(var o in e){var u=e[o],i=q(t,o);a(u)?n[o]=N(u,i,r):l(u)?n[o]=z(i,u):c(u)&&(n[o]=z(i,u({theme:r})))}return n}function W(e,t,r,n){for(var o in void 0===r&&(r=e),void 0===n&&(n={value:""}),e){var u=e[o],i=q(t,o);a(u)?W(u,i,r,n):l(u)?n.value+=R(i)+": "+u+";":c(u)&&(n.value+=R(i)+": "+u({theme:r})+";")}return n.value}var F="xstyled-color-mode",A="undefined"!=typeof window&&function(){try{var e=F+"-test";return window.localStorage.setItem(e,e),window.localStorage.removeItem(e),!0}catch(e){return!1}}()?{get:function(){return window.localStorage.getItem(F)},set:function(e){return window.localStorage.setItem(F,e)},clear:function(){return window.localStorage.removeItem(F)}}:{get:function(){return null},set:function(){},clear:function(){}},G=function(e){return"xstyled-color-mode-"+e},Q="xstyled-colors",H=["light","dark"];var D=function(e){return"(prefers-color-scheme: "+e+")"};function U(e){return e&&e.colors&&e.colors.modes}function V(e){return e&&(void 0===e.useCustomProperties||e.useCustomProperties)}function Z(e){return e.initialColorModeName||"default"}function J(e,t){var r=(void 0===t?{}:t).targetSelector,n=void 0===r?"body":r;if(!U(e))return null;var o=e.colors,u=o.modes,i=W(f(o,["modes"]),Q,e);function l(t){var r=function(e,t){return s({},e,{colors:s({},e.colors,e.colors.modes[t])})}(e,t),n=r.colors,o=n.modes;return W(s({},f(n,["modes"]),o[t]),Q,r)}return!1!==e.useColorSchemeMediaQuery&&H.forEach((function(e){if(u[e]){var t="@media "+D(e);i+=t+"{"+l(e)+"}"}})),[Z(e)].concat(Object.keys(u)).forEach((function(e){var t="&."+G(e);i+=t+"{"+l(e)+"}"})),n+"{"+i+"}"}function K(e){var t=i.default.useMemo((function(){return function(e){return e&&(void 0===e.useColorSchemeMediaQuery||e.useColorSchemeMediaQuery)}(e)?H.map((function(t){if(!e.colors.modes[t])return null;var r=function(e){if("undefined"==typeof window||void 0===window.matchMedia)return null;var t=D(e);return window.matchMedia(t)}(t);return r?{mode:t,mql:r}:null})).filter(Boolean):[]}),[e]),r=i.default.useState((function(){var e=t.find((function(e){return e.mql.matches}));return e?e.mode:null})),n=r[0],o=r[1];return i.default.useEffect((function(){var e=t.filter((function(e){var t=e.mql;return t.addListener&&t.removeListener})).map((function(e){var t=e.mode,r=e.mql,n=function(e){var r=e.matches;o(r?t:function(e){return e===t?null:t})};return r.addListener(n),function(){return r.removeListener(n)}}));return function(){return e.forEach((function(e){return e()}))}})),n}var X="undefined"!=typeof window?i.default.useLayoutEffect:i.default.useEffect;function Y(e,t){var r=(void 0===t?{}:t).target,n=K(e),o=function(e){return e.defaultColorModeName||Z(e)}(e),u=Z(e),l=i.default.useState((function(){return U(e)?o:null})),a=l[0],c=l[1],d=V(e),f=i.default.useRef(!1),s=i.default.useCallback((function(e){f.current=!0,c(e)}),[]);return X((function(){if(U(e)){var t=A.get();a!==(t||n||o)&&c(t||n||o)}}),[]),X((function(){f.current&&A.set(a)}),[a]),X((function(){if(!A.get()){var e=n||o;e!==a&&c(e)}}),[a,n,o]),X((function(){if(d&&(A.get()||u!==a)){var e=G(a),t=r||document.body;return t.classList.add(e),function(){t.classList.remove(e)}}}),[d,r,a,u]),[a,s]}var $=i.default.createContext();function ee(e){var t=e.ThemeContext,r=e.ThemeProvider,n=e.ColorModeStyle;return function(e){var o=e.children,u=e.target,l=e.targetSelector,a=i.default.useContext(t);if(!a)throw new Error("[ColorModeProvider] requires ThemeProvider upper in the tree");var c=Y(a,{target:u}),d=function(e,t){var r=i.default.useMemo((function(){if(!V(e))return null;if(!U(e))return e;var t=e.colors,r=t.modes,n=f(t,["modes"]);return s({},e,{colors:s({},N(n,Q,e),{modes:r}),__rawColors:e.colors})}),[e]),n=i.default.useMemo((function(){return V(e)?null:U(e)?t===Z(e)?s({},e,{__colorMode:t}):s({},e,{colors:s({},e.colors,e.colors.modes[t]),__colorMode:t,__rawColors:e.colors}):e}),[e,t]);return r||n}(a,c[0]);return i.default.createElement(i.default.Fragment,null,i.default.createElement(n,{targetSelector:l}),i.default.createElement(r,{theme:d},i.default.createElement($.Provider,{value:c},o)))}}function te(e){var t=(void 0===e?{}:e).target;return"(function() { try {\n    var mode = localStorage.getItem('"+F+"');\n    if (mode) "+(void 0===t?"document.body":t)+".classList.add('"+"xstyled-color-mode-' + mode);\n  } catch (e) {} })();"}function re(){var e=t.css.apply(void 0,arguments),r=d(e);return r.map(I)}function ne(e,t){return t||(t=e.slice(0)),e.raw=t,e}function oe(){var e=ne(["",""]);return oe=function(){return e},e}function ue(e){return function e(t){var r=function(){return t(oe(),re.apply(void 0,arguments))};return r.attrs=function(r){return e(t.attrs(r))},r.withConfig=function(r){return e(t.withConfig(r))},r}(u.default(e))}var ie=ue(n.createSystemComponent(i.default))(y);function le(){var e=ne(["",""]);return le=function(){return e},e}ue.box=ue(ie),Object.keys(u.default).forEach((function(e){ue[e]=ue(e),ue[e+"Box"]=ue(ie.withComponent(n.createSystemComponent(i.default,e)))}));var ae=t.createGlobalStyle(le(),(function(e){return J(e.theme,{targetSelector:e.targetSelector})})),ce=ee({ThemeContext:t.ThemeContext,ThemeProvider:t.ThemeProvider,ColorModeStyle:ae});function de(){return i.default.useContext(t.ThemeContext)}Object.keys(n).forEach((function(t){"default"!==t&&Object.defineProperty(e,t,{enumerable:!0,get:function(){return n[t]}})})),Object.defineProperty(e,"ServerStyleSheet",{enumerable:!0,get:function(){return t.ServerStyleSheet}}),Object.defineProperty(e,"StyleSheetConsumer",{enumerable:!0,get:function(){return t.StyleSheetConsumer}}),Object.defineProperty(e,"StyleSheetContext",{enumerable:!0,get:function(){return t.StyleSheetContext}}),Object.defineProperty(e,"StyleSheetManager",{enumerable:!0,get:function(){return t.StyleSheetManager}}),Object.defineProperty(e,"ThemeConsumer",{enumerable:!0,get:function(){return t.ThemeConsumer}}),Object.defineProperty(e,"ThemeContext",{enumerable:!0,get:function(){return t.ThemeContext}}),Object.defineProperty(e,"ThemeProvider",{enumerable:!0,get:function(){return t.ThemeProvider}}),Object.defineProperty(e,"isStyledComponent",{enumerable:!0,get:function(){return t.isStyledComponent}}),Object.defineProperty(e,"keyframes",{enumerable:!0,get:function(){return t.keyframes}}),Object.defineProperty(e,"withTheme",{enumerable:!0,get:function(){return t.withTheme}}),e.Box=ie,e.ColorModeProvider=ce,e.createGlobalStyle=function(){return t.createGlobalStyle([re.apply(void 0,arguments)])},e.css=re,e.default=ue,e.getColorModeInitScriptElement=function(e){return i.default.createElement("script",{key:"xstyled-color-mode-init",dangerouslySetInnerHTML:{__html:te(e)}})},e.getColorModeInitScriptTag=function(e){return"<script>"+te(e)+"<\/script>"},e.useBreakpoint=function(){return e=de(),t=m(e),r=g(),i.default.useMemo((function(){return Object.keys(t).reverse().find((function(e){return r>t[e]}))||null}),[t,r]);var e,t,r},e.useBreakpoints=function(){return m(de())},e.useColorMode=function(){var e=i.default.useContext($);if(!e)throw new Error("[useColorMode] requires the ColorModeProvider component");return e},e.useDown=function(e){return v(de(),e)},e.useTheme=de,e.useUp=function(e){return h(de(),e)},e.useViewportWidth=g,Object.defineProperty(e,"__esModule",{value:!0})}));
